# Market Backend

Node.js backend –¥–ª—è —Ç–æ—Ä–≥–æ–≤–æ–π –ø–ª–æ—â–∞–¥–∫–∏, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π OLX. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, CRUD –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤, –∑–∞–∫–∞–∑—ã, email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞–º, JWT-like —Å–µ—Å—Å–∏–∏, –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ Cloudinary –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤.

## üì¶ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Node.js**, **Express**
- **MongoDB**, **Mongoose**
- **Cloudinary** (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- **JWT-like —Å–µ—Å—Å–∏–∏**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ access/refresh —Ç–æ–∫–µ–Ω–æ–≤ –≤ –±–∞–∑–µ (–∫–æ–ª–ª–µ–∫—Ü–∏—è Session)
- **Handlebars** (email-—à–∞–±–ª–æ–Ω—ã)
- **Brevo (ex Sendinblue)** ‚Äî email-—Ä–∞—Å—Å—ã–ª–∫–∞
- **Multer** (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- **Joi** (–≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
- **dotenv** (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- **Vercel/Netlify-—Å–æ–≤–º–µ—Å—Ç–∏–º** (–µ—Å–ª–∏ –±—É–¥–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone https://github.com/your-username/market-back.git
cd market-back
npm install
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å .env —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run dev
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ controllers/        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îú‚îÄ‚îÄ models/             # Mongoose-—Å—Ö–µ–º—ã: User, Goods, Order, Session
‚îú‚îÄ‚îÄ routes/             # auth, goods, own/goods, own/orders
‚îú‚îÄ‚îÄ services/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, createOrder)
‚îú‚îÄ‚îÄ middlewares/        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ utils/              # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, sendEmail, ctrlWrapper
‚îú‚îÄ‚îÄ validation/         # Joi-—Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ constants/          # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (email subjects, —à–∞–±–ª–æ–Ω—ã)
‚îî‚îÄ‚îÄ app.js              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- –í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `authenticate` middleware.
- Access –∏ Refresh —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `Session`, –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø–æ —Å—Ä–æ–∫—É –¥–µ–π—Å—Ç–≤–∏—è.

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã

### üîë `/auth`

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å        | –û–ø–∏—Å–∞–Ω–∏–µ                 |
| ----- | ----------- | ------------------------ |
| POST  | `/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST  | `/login`    | –õ–æ–≥–∏–Ω –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏  |
| POST  | `/logout`   | –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏  |
| POST  | `/refresh`  | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞ |

---

### üì¶ `/goods`

–ü—É–±–ª–∏—á–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (–¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏).

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å   | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
| ----- | ------ | -------------------------------------------- |
| GET   | `/`    | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (—Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—è) |
| GET   | `/:id` | –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ ID                         |

---

### üõí `/own/goods` (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

| –ú–µ—Ç–æ–¥  | –ü—É—Ç—å   | –û–ø–∏—Å–∞–Ω–∏–µ                      |
| ------ | ------ | ----------------------------- |
| GET    | `/`    | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ |
| POST   | `/`    | –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ |
| PATCH  | `/:id` | –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ ID          |
| DELETE | `/:id` | –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ ID           |

---

### üì¨ `/own/orders` (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ                                                          |
| ----- | ---- | ----------------------------------------------------------------- |
| POST  | `/`  | –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑, —É–≤–µ–¥–æ–º–∏—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–æ–≤, —É–º–µ–Ω—å—à–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤     |
| GET   | `/`  | –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞ |

- –í —Ç–µ–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è `seller` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞.
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –≤—Å–µ –ø—Ä–æ–¥–∞–≤—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç email —Å –¥–µ—Ç–∞–ª—è–º–∏.

---

## ‚òÅÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `multer` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ multipart/form-data.
- –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ **Cloudinary** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞.

---

## üß™ –í–∞–ª–∏–¥–∞—Ü–∏—è

- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Joi.
- –í—Å–µ —Å—Ö–µ–º—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `validation/`
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ middleware `validateBody(schema)`

---

## ‚úâÔ∏è Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞–º

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä **Handlebars**
- –ü–∏—Å—å–º–∞ —Ä–∞—Å—Å—ã–ª–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **Brevo** (ex Sendinblue)
- –ü—Ä–æ–¥–∞–≤–µ—Ü –ø–æ–ª—É—á–∞–µ—Ç email —Å–æ —Å–ø–∏—Å–∫–æ–º –∑–∞–∫–∞–∑–∞–Ω–Ω—ã—Ö —É –Ω–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∞–¥—Ä–µ—Å–æ–º –¥–æ—Å—Ç–∞–≤–∫–∏

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

–ü—Ä–∏–º–µ—Ä –≤ `.env.example`. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```
PORT=3000
MONGODB_URI=your_mongodb_connection_string
JWT_SECRET=your_jwt_secret
CLOUDINARY_CLOUD_NAME=your_cloudinary_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret
BREVO_API_KEY=your_brevo_api_key
BREVO_SENDER_EMAIL=your_sender_email
CLIENT_URL=https://your-frontend.example.com
```

---

## üìù –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

---
